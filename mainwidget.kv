#:kivy 2.3.1

<MainWidget>: # Regra do kivy
    orientation: 'vertical' # Divide a tela em 2 caixas horizontais
    canvas: 
        Color: 
            rgb: 0.5,0.5,0.5 # Cinza
        Rectangle: # Desenha uma caixa retangular
            size: self.size
    BoxLayout:
        orientation: 'horizontal' # Cria um layout filho que vai ser divido em duas caixas veticais
        size_hint: (1,0.12)
        spacing: 10 
        Label:
            text: 'SCADA Refrigeração v1.0'
            size_hint_x: None
            width: 300
        BoxLayout:
            orientation:'vertical' # Vai "empilhar" coisas uma em cima da outra
            size_hint_x: None # Desabilita o dimensionamento horizontal
            width: 400
            Label:
                text: 'Configurações de conexão'
            BoxLayout:
                orientation:'horizontal'
                Button: 
                    text: "MODBUS"
                    on_release: root._modbusPopup.open()
                Button: 
                    text: "Scan Time"
                    on_release: root._scanPopup.open()
        Image:
            id: img_con
            size_hint_x: None
            width: 80
            source: 'assets/desconectado.png'
            pos_hint: {'top':1,'right':1}
### DAQUI PRA CIMA FOI FEITA A BARRA DE CIMA DO LAYOUT ###

### DAQUI PRA BAIXO FOI FEITA A BARRA DE BAIXO ###

    FloatLayout:
        canvas:
            Color:
                rgb: 1,1,1 # Fundo branco para não ter contraste em relação a imagem de fundo
            Rectangle: 
                size: self.size
        Image: 
            source: 'assets/fundo.png'
        
        Label:
            id:  encoder_axial #Rotação mecânica do ventilador
            text: '-.- RPM'
            fint_size: 25
            bold: True
            halign: 'center'
            pos_hint: {'x':-0.326,'y':0.365}
            color: 0.4,0.4,0.4,1

        TempLabel:
            id:  torque_axial
            text: '-.- N.m'
            pos_hint: {'x':-0.457,'y':0.30}

        TempLabel:
            id:  pit01 #Pressão do tubo azul 
            text: '-.- psi'
            pos_hint: {'x':-0.045,'y':0.085}


        TempLabel:
            id:  pit02 #Pressão do tubo vermelho
            text: '-.- psi'
            pos_hint: {'x':-0.03,'y':-0.09}

        TempLabel:
            id:  pit03 #Pressão do ar de entrada
            text: '-.- mmH2O'
            pos_hint: {'x':-0.2,'y':0.44}

        TempLabel:
            id: tit01 #Temperatura do tubo azul
            text: '-.- °C'
            pos_hint: {'x':-0.045,'y':0.125}

        TempLabel:
            id: tit02 #Temperatura do tubo vermelho (trocador de calor)
            text: '-.- °C'
            pos_hint: {'x':-0.025,'y':-0.305}

        TempLabel:
            id: vazao #Vazão do ar na saída do tubo
            text: '-.- m³/h'
            pos_hint: {'x':0.44,'y':0.41}

        TempLabel:
            id: velocidade #Velocidade do ar na saída do tubo
            text: '-.- m/s'
            pos_hint: {'x':0.438,'y':0.37}

        TempLabel:
            id: temperatura #temperatura do ar na saída do tubo
            text: '-.- m/s'
            pos_hint: {'x':0.438,'y':0.33}

        # Painel de botões à direita sobre a imagem
        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.2, 0.8)  # 20% da largura e 80% da altura
            pos_hint: {'right': 0.98, 'center_y': 0.47}  # Alinha à direita
            spacing: 4.5

            Button:
                text: "Comandos"
                size_hint_y: None
                height: '50dp'
                background_color: (0.4,0.4,0.4,1)
                background_normal: ""
                color: (1,1,1,1)
                on_release: 
                    

            Button:
                text: "Temperatura"
                size_hint_y: None
                height: '50dp'
                background_color: (0.6,0.6,0.6,1)
                background_normal: ""
                color: (1,1,1,1)                
                on_release: root._monitoraTemperatura.open()

            Button:
                text: "Tensão"
                size_hint_y: None
                height: '50dp'
                background_color: (0.6,0.6,0.6,1)
                background_normal: ""
                color: (1,1,1,1)
                on_release: root._monitoraTensao.open()

            Button:
                text: "Corrente"
                size_hint_y: None
                height: '50dp'
                background_color: (0.6,0.6,0.6,1)
                background_normal: ""
                color: (1,1,1,1)
                on_release: root._monitoraCorrente.open()

            Button:
                text: "Potência"
                size_hint_y: None
                height: '50dp'
                background_color: (0.6,0.6,0.6,1)
                background_normal: ""
                color: (1,1,1,1)
                on_release: root._monitoraPotencias.open()

            Button:
                text: "Dados Históricos"
                size_hint_y: None
                height: '50dp'
                background_color: (0.4,0.4,0.4,1)
                background_normal: ""
                color: (1,1,1,1)
                on_release: app.root.show_historico()

<TempLabel@Label>:
    font_size: 16
    bold: True
    halign: 'center'
    color: 0.4,0.4,0.4,1